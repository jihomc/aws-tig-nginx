# How to set up an Nginx proxy server with Grafana to enable HTTPS
# With Nginx, there is no need to enable HTTPS directly in Grafana

# Install Nginx
sudo apt install curl gnupg2 ca-certificates lsb-release
echo "deb http://nginx.org/packages/ubuntu `lsb_release -cs` nginx" \
    | sudo tee /etc/apt/sources.list.d/nginx.list
curl -fsSL https://nginx.org/keys/nginx_signing.key | sudo apt-key add -
sudo apt-key fingerprint ABF5BD827BD9BF62
sudo apt update
sudo apt install nginx
sudo systemctl start nginx

# Nginx configuration files
sudo vim /etc/nginx/nginx.conf
sudo vim /etc/nginx/sites-available/default
sudo vim /etc/nginx/site-enabled/default

# Create self-signed certificates for Nginx
sudo openssl req -x509 -nodes -newkey rsa:2048 -keyout /etc/ssl/nginx-selfsigned.key -out /etc/ssl/nginx-selfsigned.crt -days 365

# Grant Nginx permissions on the certificate
# Nginx user specified in nginx.conf
sudo chown "www-data":"www-data" /etc/ssl/nginx-selfsigned.*




